'use strict';
sap.ui.define([
    'open/ux/preview/client/thirdparty/@sap-ux-private/control-property-editor-common',
    './nodes',
    'sap/base/Log',
    '../error-utils'
], function (___sap_ux_private_control_property_editor_common, ___nodes, Log, ___error_utils) {
    'use strict';
    const outlineChanged = ___sap_ux_private_control_property_editor_common['outlineChanged'];
    const transformNodes = ___nodes['transformNodes'];
    const getError = ___error_utils['getError'];
    async function initOutline(rta, sendAction) {
        const outline = await rta.getService('outline');
        const scenario = rta.getFlexSettings().scenario;
        async function syncOutline() {
            try {
                const viewNodes = await outline.get();
                const outlineNodes = await transformNodes(viewNodes, scenario);
                sendAction(outlineChanged(outlineNodes));
            } catch (error) {
                Log.error('Outline sync failed!', getError(error));
            }
        }
        await syncOutline();
        outline.attachEvent('update', syncOutline);
    }
    var __exports = { __esModule: true };
    __exports.initOutline = initOutline;
    return __exports;
});